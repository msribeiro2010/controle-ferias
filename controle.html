<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de Controle</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/theme.css">
    <style>
        :root {
            --primary-color: #4A90E2;
            --secondary-color: #5C6BC0;
            --background-color: #F5F7FA;
            --card-color: #FFFFFF;
            --text-primary: #2C3E50;
            --text-secondary: #606F7B;
            --bg-color: #f5f5f5;
            --text-color: #333;
            --card-bg: #fff;
            --navbar-bg: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            --shadow-color: rgba(0,0,0,0.1);
            --hover-bg: rgba(0,0,0,0.05);
            --border-color: #dee2e6;
        }

        [data-theme="dark"] {
            --primary-color: #2196F3;
            --secondary-color: #1976D2;
            --background-color: #1a1a1a;
            --card-color: #2d2d2d;
            --text-primary: #e0e0e0;
            --text-secondary: #9e9e9e;
            --bg-color: #1a1a1a;
            --text-color: #e0e0e0;
            --card-bg: #2d2d2d;
            --navbar-bg: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            --shadow-color: rgba(0,0,0,0.3);
            --hover-bg: rgba(255,255,255,0.05);
            --border-color: #404040;
        }

        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background-color: var(--background-color);
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            margin: 0;
            padding: 8px;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .navbar {
            background: var(--navbar-bg);
            padding: 6px;
            box-shadow: 0 2px 4px var(--shadow-color);
        }

        .navbar-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }

        .navbar-left, .navbar-right {
            flex: 1;
        }

        .navbar-center {
            flex: 2;
            display: flex;
            justify-content: center;
        }

        .navbar-brand-container {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .navbar-brand-image {
            display: block;
            padding: 5px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .navbar-brand-image:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.05);
        }

        .navbar-brand-image img {
            max-height: 35px;
            width: auto;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
        }

        .navbar-brand-text {
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .navbar-brand-text:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .navbar-brand-text span {
            font-size: 1.3rem;
            font-weight: 500;
            color: white;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }

        .datetime-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            margin-right: 20px;
        }

        .time {
            font-size: 1.8rem;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
            font-family: 'Roboto Mono', monospace;
            letter-spacing: 2px;
        }

        .date {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.9);
            margin-top: 2px;
            font-family: 'Roboto', sans-serif;
        }

        .navbar-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .logout-button {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .logout-button i {
            font-size: 1em;
            transition: transform 0.2s ease;
        }

        .logout-button:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }

        .logout-button:active {
            transform: translateY(0);
            background: rgba(255, 255, 255, 0.15);
        }

        @media (max-width: 768px) {
            .logout-button {
                padding: 5px 10px;
                font-size: 0.85em;
            }
        }

        .main-content {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .control-panel {
            background-color: var(--card-color);
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            text-align: center;
            max-width: 800px;
            width: 100%;
            transition: transform 0.3s ease;
        }

        .control-panel:hover {
            transform: translateY(-5px);
        }

        .welcome-section {
            text-align: center;
            margin: 6px auto;
            background: var(--card-bg);
            padding: 10px;
            border-radius: 4px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.03);
            max-width: 1200px;
            width: calc(100% - 16px);
            box-sizing: border-box;
        }

        .welcome-section .brasao {
            margin-bottom: 0.8rem;
        }

        .welcome-section .brasao img {
            height: 80px;
            width: auto;
            transition: transform 0.3s ease;
        }

        .welcome-section .brasao a:hover img {
            transform: scale(1.05);
        }

        .welcome-section .greeting {
            font-size: 1.4rem;
            color: var(--text-primary);
            margin-bottom: 0.2rem;
        }

        .welcome-section .user-name {
            font-family: 'Dancing Script', cursive;
            font-size: 1.8rem;
            color: var(--text-primary);
            font-weight: 600;
            margin-bottom: 0.8rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .welcome-section .description {
            font-size: 0.95rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .menu-item {
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            border: 1px solid rgba(0,0,0,0.05);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .menu-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .menu-item i {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .menu-item h3 {
            color: var(--text-primary);
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
        }

        .menu-item p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .btn-custom {
            padding: 0.8rem 2rem;
            font-size: 1.1rem;
            border-radius: 10px;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .btn-logout {
            background-color: transparent;
            border: 2px solid white;
            padding: 0.5rem 1.5rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .btn-logout:hover {
            background-color: white;
            color: var(--primary-color);
        }

        footer {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1rem 0;
            margin-top: auto;
        }

        @media (max-width: 992px) {
            .navbar .container {
                padding: 0.5rem 1rem;
            }

            .datetime-header {
                font-size: 0.9em;
            }

            .control-panel {
                padding: 2rem 1.5rem;
                margin: 1rem;
            }

            .welcome-section h1 {
                font-size: 2rem;
            }

            .menu-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .navbar .container .d-flex {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem 0;
            }

            .navbar-brand {
                font-size: 1.2rem;
            }

            .datetime-header {
                order: 2;
                margin: 0.5rem 0;
                display: flex;
            }

            .header-buttons {
                order: 3;
                width: 100%;
            }

            .control-panel {
                padding: 1.5rem 1rem;
                margin: 0.5rem;
            }

            .welcome-section h1 {
                font-size: 1.8rem;
            }

            .menu-grid {
                grid-template-columns: 1fr;
            }

            .menu-item {
                padding: 1.2rem;
            }

            .menu-item i {
                font-size: 2rem;
            }

            .menu-item h3 {
                font-size: 1.1rem;
            }
        }

        @media (max-width: 480px) {
            .navbar-brand {
                font-size: 1rem;
            }

            .datetime-header .time {
                font-size: 1.3em;
            }

            .datetime-header .date {
                font-size: 0.8em;
            }

            .welcome-section h1 {
                font-size: 1.5rem;
            }

            .welcome-section p {
                font-size: 0.9rem;
            }

            .menu-item {
                padding: 1rem;
            }

            .menu-item i {
                font-size: 1.8rem;
            }

            .menu-item h3 {
                font-size: 1rem;
            }

            .menu-item p {
                font-size: 0.8rem;
            }

            .feriados-mes h2 {
                font-size: 1.2rem;
            }

            .feriado-item {
                padding: 0.8rem;
            }

            .feriado-data-dia {
                font-size: 1.2rem;
            }

            .feriado-nome {
                font-size: 0.9rem;
            }

            .feriado-tipo {
                font-size: 0.8rem;
            }
        }

        .welcome-section h1 span {
            color: var(--primary-color);
            font-weight: 600;
        }

        .header-buttons {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .btn-feriados {
            background-color: transparent;
            border: 2px solid white;
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 8px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 500;
        }

        .btn-feriados:hover {
            background-color: white;
            color: var(--primary-color);
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .header-buttons {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .btn-feriados, .btn-logout {
                width: 100%;
                justify-content: center;
            }
        }

        .feriados-container {
            padding: 1rem;
        }

        .feriados-mes {
            margin-bottom: 2rem;
        }

        .feriado-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid #eee;
            gap: 1.5rem;
        }

        .feriado-data {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 80px;
        }

        .feriado-data-dia-semana {
            font-size: 0.8rem;
            color: #666;
            margin-top: 0.2rem;
        }

        .feriado-data-dia {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1976d2;
        }

        .feriado-data-mes {
            font-size: 0.8rem;
            color: #666;
            text-transform: uppercase;
        }

        .feriado-info {
            flex: 1;
        }

        .feriado-nome {
            font-weight: 500;
            margin-bottom: 0.25rem;
        }

        .feriado-tipo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .feriado-passado {
            opacity: 0.7;
            background: #ffebee !important;
        }

        .feriado-passado .feriado-data-dia,
        .feriado-passado .feriado-data-mes,
        .feriado-passado .feriado-data-dia-semana {
            color: #757575;
        }

        .feriado-passado .feriado-nome {
            color: #757575;
        }

        .feriado-passado .feriado-tipo {
            color: #9e9e9e;
        }

        .feriado-passado .feriado-tipo i {
            color: #9e9e9e;
        }

        /* Animação para destacar o próximo feriado */
        @keyframes highlight {
            0% { background-color: rgba(25, 118, 210, 0.1); }
            50% { background-color: rgba(25, 118, 210, 0.2); }
            100% { background-color: white; }
        }

        #proximoFeriado {
            border-left: 4px solid #1976D2;
        }

        .navbar-left .navbar-brand {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: white;
            transition: all 0.3s ease;
        }

        .navbar-left .navbar-brand i {
            font-size: 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            padding: 0.5rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .navbar-left .navbar-brand:hover {
            transform: translateY(-2px);
        }

        .navbar-left .navbar-brand:hover i {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(10deg);
        }

        .btn-notas-adesivas {
            background: #ffca28;
            font-size: 0.9rem;
            padding: 0.5rem 1rem;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            color: #333;
            transition: background 0.2s ease;
        }

        .btn-notas-adesivas:hover {
            background: #fdd835;
        }

        .navbar-trt-link {
            color: white;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 6px;
            font-size: 0.9rem;
            background: rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .navbar-trt-link:hover {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .navbar-trt-link i {
            font-size: 1rem;
        }

        .navbar-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .aniversariante-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 5px;
            padding: 4px 0;
        }

        .aniversariante-dia {
            background: #ff6b6b;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: 600;
            min-width: 28px;
            text-align: center;
            font-size: 0.9rem;
        }

        .nome-aniversariante {
            font-family: 'Dancing Script', cursive;
            font-size: 1.2rem;
            color: #e74c3c;
            font-weight: 600;
        }

        .status-aniversario {
            font-size: 0.8rem;
            color: #666;
            font-style: italic;
        }

        .alerta-plantao.aniversario {
            border-color: #ff6b6b;
            background: linear-gradient(to right, rgba(255,107,107,0.1), transparent);
        }

        .alerta-plantao.aniversario .alerta-titulo {
            color: #e74c3c;
        }

        .alerta-plantao.aniversario .alerta-titulo i {
            color: #ff6b6b;
        }

        /* Estilo moderno para os alertas */
        .alerts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 8px;
            max-width: 1200px;
            margin: 8px auto;
            padding: 10px;
            background: var(--card-bg);
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.03);
            width: calc(100% - 16px);
            box-sizing: border-box;
        }

        .alerta-plantao {
            padding: 8px;
            margin-bottom: 8px;
            border-radius: 4px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }

        .alerta-plantao:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .alerta-titulo {
            display: flex;
            align-items: center;
            font-size: 0.95em;
            font-weight: bold;
            margin-bottom: 6px;
            padding-bottom: 4px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            letter-spacing: 0.3px;
        }

        .alerta-titulo i {
            margin-right: 6px;
            font-size: 1.1em;
        }

        .alerta-conteudo {
            font-size: 0.9em;
            line-height: 1.2;
            letter-spacing: 0.2px;
        }

        /* Estilo específico para alerta de plantão */
        .alerta-plantao.plantao {
            background: linear-gradient(135deg, #4B6CB7 0%, #6F8CD9 100%);
            color: white;
            font-size: 0.95em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }

        .alerta-plantao.plantao .alerta-titulo {
            font-size: 1.1em;
            color: white;
            border-bottom: 1px solid rgba(255,255,255,0.4);
        }

        .alerta-plantao.plantao .alerta-titulo i {
            color: #FFD700;
            font-size: 1.2em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }

        .alerta-plantao.plantao .alerta-conteudo {
            color: white;
            font-weight: 500;
        }

        /* Estados especiais */
        .alerta-plantao.proximo {
            background: linear-gradient(135deg, #64B5F6 0%, #90CAF9 100%);
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .alerta-plantao.proximo .alerta-titulo {
            color: white;
            border-bottom: 1px solid rgba(255,255,255,0.4);
        }

        .alerta-plantao.proximo .alerta-conteudo {
            color: white;
            font-weight: 500;
        }

        .alerta-plantao.proximo .alerta-titulo i {
            color: #FFFFFF;
        }

        /* Estilo específico para alerta de férias */
        .alerta-plantao.ferias {
            background: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%);
            color: white;
            font-size: 0.95em;
            text-shadow: 1px 1px 1px rgba(0,0,0,0.1);
        }

        .alerta-plantao.ferias .alerta-titulo {
            font-size: 1.1em;
            color: white;
            border-bottom: 1px solid rgba(255,255,255,0.4);
        }

        .alerta-plantao.ferias .alerta-titulo i {
            color: #FFFFFF;
            font-size: 1.2em;
        }

        .alerta-plantao.ferias .alerta-conteudo {
            color: white;
            font-weight: 500;
        }

        /* Estilo específico para alerta de aniversário */
        .alerta-plantao.aniversario {
            background: linear-gradient(135deg, #2193b0 0%, #6dd5ed 100%);
            color: white;
            font-size: 1.1em;
            text-shadow: 1px 1px 1px rgba(0,0,0,0.1);
        }

        .alerta-titulo {
            display: flex;
            align-items: center;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255,255,255,0.3);
            letter-spacing: 0.5px;
        }

        .alerta-conteudo {
            font-size: 1.1em;
            line-height: 1.5;
            letter-spacing: 0.3px;
        }

        /* Container dos alertas */
        .alerts-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 15px;
        }

        .modal-content {
            border: none;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .modal-header {
            background: linear-gradient(135deg, #2196F3, #1976D2);
            color: white;
            border-radius: 15px 15px 0 0;
            padding: 1.5rem;
        }

        .modal-title {
            font-size: 1.4rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .modal-title i {
            font-size: 1.6rem;
        }

        .feriados-mes h2 {
            background: linear-gradient(135deg, #f5f7fa, #e3e6f0);
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            color: #1976D2;
        }

        .feriado-item {
            background: white;
            border-radius: 10px;
            margin-bottom: 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }

        .feriado-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .feriado-data {
            background: linear-gradient(135deg, #E3F2FD, #BBDEFB);
            padding: 1rem;
            border-radius: 10px;
            min-width: 100px;
        }

        .feriado-data-dia {
            color: #1565C0;
            font-size: 1.8rem;
            font-weight: bold;
        }

        .feriado-data-mes {
            color: #1976D2;
            font-weight: 500;
        }

        .feriado-data-dia-semana {
            color: #2196F3;
            font-size: 0.85rem;
            margin-top: 0.3rem;
        }

        .feriado-info {
            padding: 0.5rem 1rem;
        }

        .feriado-nome {
            color: #2C3E50;
            font-weight: 500;
            font-size: 1.1rem;
            margin-bottom: 0.4rem;
        }

        .feriado-tipo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
        }

        .feriado-tipo i {
            color: #1976D2;
        }

        /* Cores diferentes para cada tipo de feriado */
        .feriado-tipo.nacional i { color: #4CAF50; }
        .feriado-tipo.facultativo i { color: #FF9800; }
        .feriado-tipo.recesso i { color: #9C27B0; }
        .feriado-tipo.estadual i { color: #E91E63; }
        .feriado-tipo.municipal i { color: #00BCD4; }

        /* Estilo para feriados passados */
        .feriado-item.passado {
            background: #f5f5f5;
            opacity: 0.7;
        }

        .feriado-item.passado .feriado-data {
            background: linear-gradient(135deg, #e0e0e0, #bdbdbd);
        }

        .feriado-item.passado .feriado-data-dia,
        .feriado-item.passado .feriado-data-mes,
        .feriado-item.passado .feriado-data-dia-semana {
            color: #757575;
        }

        .feriado-item.passado .feriado-nome {
            color: #757575;
        }

        .feriado-item.passado .feriado-tipo {
            color: #9e9e9e;
        }

        .feriado-item.passado .feriado-tipo i {
            color: #9e9e9e;
        }

        /* Animação para destacar o próximo feriado */
        @keyframes highlight {
            0% { background-color: rgba(25, 118, 210, 0.1); }
            50% { background-color: rgba(25, 118, 210, 0.2); }
            100% { background-color: white; }
        }

        #proximoFeriado {
            border-left: 4px solid #1976D2;
        }

        .navbar-left .navbar-brand {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: white;
            transition: all 0.3s ease;
        }

        .navbar-left .navbar-brand i {
            font-size: 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            padding: 0.5rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .navbar-left .navbar-brand:hover {
            transform: translateY(-2px);
        }

        .navbar-left .navbar-brand:hover i {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(10deg);
        }

        .btn-notas-adesivas {
            background: #ffca28;
            font-size: 0.9rem;
            padding: 0.5rem 1rem;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            color: #333;
            transition: background 0.2s ease;
        }

        .btn-notas-adesivas:hover {
            background: #fdd835;
        }

        .navbar-trt-link {
            color: white;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 6px;
            font-size: 0.9rem;
            background: rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .navbar-trt-link:hover {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .navbar-trt-link i {
            font-size: 1rem;
        }

        .navbar-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .aniversariante-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 5px;
            padding: 4px 0;
        }

        .aniversariante-dia {
            background: #ff6b6b;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: 600;
            min-width: 28px;
            text-align: center;
            font-size: 0.9rem;
        }

        .nome-aniversariante {
            font-family: 'Dancing Script', cursive;
            font-size: 1.2rem;
            color: #e74c3c;
            font-weight: 600;
        }

        .status-aniversario {
            font-size: 0.8rem;
            color: #666;
            font-style: italic;
        }

        .alerta-plantao.aniversario {
            border-color: #ff6b6b;
            background: linear-gradient(to right, rgba(255,107,107,0.1), transparent);
        }

        .alerta-plantao.aniversario .alerta-titulo {
            color: #e74c3c;
        }

        .alerta-plantao.aniversario .alerta-titulo i {
            color: #ff6b6b;
        }

        /* Media queries para dispositivos móveis */
        @media (max-width: 768px) {
            .welcome-section {
                padding: 15px;
                margin: 10px;
            }

            .welcome-section h2 {
                font-size: 1.4em;
            }

            .alerts-container {
                padding: 15px;
                margin: 10px;
                grid-template-columns: 1fr;
            }

            .alerta-plantao {
                margin-bottom: 12px;
                padding: 12px;
            }

            .alerta-titulo {
                font-size: 1em;
            }

            .alerta-conteudo {
                font-size: 0.9em;
            }
        }

        @media (max-width: 480px) {
            .welcome-section {
                padding: 12px;
                margin: 8px;
            }

            .welcome-section h2 {
                font-size: 1.2em;
            }

            .alerts-container {
                padding: 12px;
                margin: 8px;
            }

            .alerta-plantao {
                margin-bottom: 10px;
                padding: 10px;
            }

            .navbar-left {
                flex-direction: column;
                align-items: center;
                text-align: center;
                padding: 10px;
            }

            .navbar-brand {
                margin-bottom: 10px;
            }

            .navbar-brand img {
                max-width: 40px;
            }

            .navbar-brand-text span {
                font-size: 0.9em;
            }
        }

        .welcome-section h1 span {
            color: var(--primary-color);
            font-weight: 600;
        }

        .header-buttons {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .btn-feriados {
            background-color: transparent;
            border: 2px solid white;
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 8px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 500;
        }

        .btn-feriados:hover {
            background-color: white;
            color: var(--primary-color);
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .header-buttons {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .btn-feriados, .btn-logout {
                width: 100%;
                justify-content: center;
            }
        }

        .feriados-container {
            padding: 1rem;
        }

        .feriados-mes {
            margin-bottom: 2rem;
        }

        .feriado-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid #eee;
            gap: 1.5rem;
        }

        .feriado-data {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 80px;
        }

        .feriado-data-dia-semana {
            font-size: 0.8rem;
            color: #666;
            margin-top: 0.2rem;
        }

        .feriado-data-dia {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1976d2;
        }

        .feriado-data-mes {
            font-size: 0.8rem;
            color: #666;
            text-transform: uppercase;
        }

        .feriado-info {
            flex: 1;
        }

        .feriado-nome {
            font-weight: 500;
            margin-bottom: 0.25rem;
        }

        .feriado-tipo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .feriado-passado {
            opacity: 0.7;
            background: #ffebee !important;
        }

        .feriado-passado .feriado-data-dia,
        .feriado-passado .feriado-data-mes,
        .feriado-passado .feriado-data-dia-semana {
            color: #757575;
        }

        .feriado-passado .feriado-nome {
            color: #757575;
        }

        .feriado-passado .feriado-tipo {
            color: #9e9e9e;
        }

        .feriado-passado .feriado-tipo i {
            color: #9e9e9e;
        }

        /* Layout base responsivo */
        .welcome-section {
            text-align: center;
            margin: 15px auto;
            background: var(--card-bg);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.03);
            max-width: 1200px;
            width: calc(100% - 30px);
            box-sizing: border-box;
        }

        .alerts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            max-width: 1200px;
            margin: 15px auto;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.03);
            width: calc(100% - 30px);
            box-sizing: border-box;
        }

        .navbar {
            padding: 10px;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
        }

        .navbar-left {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .navbar-brand img {
            max-height: 50px;
            width: auto;
        }

        .navbar-right {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        /* Estilo do container do relógio */
        .clock-container {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 10px;
            margin: 4px 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        .clock {
            font-size: 1em;
            font-weight: 500;
            color: white;
        }

        .date-info {
            display: flex;
            align-items: center;
            gap: 8px;
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.95em;
        }

        .date-info > * {
            position: relative;
        }

        .date-info > *:not(:last-child)::after {
            content: '•';
            position: absolute;
            right: -6px;
            color: rgba(255, 255, 255, 0.4);
        }

        @media (max-width: 768px) {
            .clock-container {
                padding: 4px 8px;
            }

            .date-info {
                flex-direction: column;
                align-items: flex-start;
                gap: 2px;
            }

            .date-info > *:not(:last-child)::after {
                display: none;
            }
        }

        /* Botão de alternar tema */
        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .theme-toggle i {
            font-size: 1em;
            transition: transform 0.3s ease;
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        [data-theme="dark"] .theme-toggle .fa-moon {
            display: none;
        }

        [data-theme="dark"] .theme-toggle .fa-sun {
            display: inline-block;
        }

        .theme-toggle .fa-sun {
            display: none;
        }

        .theme-toggle .fa-moon {
            display: inline-block;
        }

        @media (max-width: 768px) {
            .theme-toggle {
                padding: 5px 10px;
                font-size: 0.85em;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <div class="navbar-content">
                <div class="navbar-left">
                    <div class="navbar-brand-container">
                        <a href="https://trt15.jus.br" target="_blank" class="navbar-brand-image">
                            <img src="brasaooficialcolorido.png" alt="Brasão">
                        </a>
                        <a href="controle.html" class="navbar-brand-text">
                            <span>TRT15 - Núcleo de Apoio ao PJe</span>
                        </a>
                    </div>
                </div>

                <div class="navbar-right">
                    <div class="clock-container">
                        <div class="date-info">
                            <div class="clock" id="clock"></div>
                            <span class="weekday" id="weekday"></span>
                            <span id="current-date"></span>
                        </div>
                    </div>
                    <button class="theme-toggle" onclick="toggleTheme()">
                        <i class="fas fa-moon"></i>
                        <i class="fas fa-sun"></i>
                        <span>Tema</span>
                    </button>
                    <button class="logout-button" onclick="logout()">
                        <span>Sair</span>
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="main-content">
        <div class="control-panel">
            <div class="welcome-section">
                    <div class="greeting">
                    <span id="saudacao">Bem-vindo</span>,
                </div>
                <div class="user-name">
                    <span id="nomeUsuario">Carregando...</span>
                </div>
                <div class="description">
                    Gerencie Férias, Plantões e Trabalho (Presencial ou Remoto)
                </div>
                <div class="alerts-container">
                    <div id="alertaPlantao" class="alerta-plantao plantao"></div>
                    <div id="alertaFerias" class="alerta-plantao ferias"></div>
                    <div id="alertaAniversario" class="alerta-plantao aniversario">
                        <!-- Será preenchido via JavaScript -->
                    </div>
                </div>
            </div>

            <div class="menu-grid">
                <!-- Gerenciar Trabalho -->
                <div class="menu-item" onclick="window.location.href='trabalho.html'" style="background: linear-gradient(135deg, #0097A7, #00838F);">
                    <i class="fas fa-briefcase" style="color: white;"></i>
                    <h3 style="color: white;">Gerenciar Trabalho</h3>
                    <p style="color: rgba(255,255,255,0.9);">Controle suas atividades de trabalho</p>
                </div>

                <!-- Gerenciar Férias -->
                <div class="menu-item" onclick="window.location.href='dashboard.html'" style="background: linear-gradient(135deg, #00BCD4, #00ACC1);">
                    <i class="fas fa-calendar-alt" style="color: white;"></i>
                    <h3 style="color: white;">Gerenciar Férias</h3>
                    <p style="color: rgba(255,255,255,0.9);">Gerencie seus períodos de férias</p>
                </div>

                <!-- Gerenciar Plantões/Folgas -->
                <div class="menu-item" onclick="window.location.href='plantoes.html'" style="background: linear-gradient(135deg, #00ACC1, #0097A7);">
                    <i class="fas fa-user-clock" style="color: white;"></i>
                    <h3 style="color: white;">Gerenciar Plantões/Folgas</h3>
                    <p style="color: rgba(255,255,255,0.9);">Controle seus plantões e folgas</p>
                </div>

                <!-- Lista de Plantões -->
                <div class="menu-item" onclick="window.location.href='lista-plantoes.html'" style="background: linear-gradient(135deg, #039BE5, #0288D1);">
                    <i class="fas fa-list" style="color: white;"></i>
                    <h3 style="color: white;">Calendário de Plantões</h3>
                    <p style="color: rgba(255,255,255,0.9);">Visualize todos os plantões registrados</p>
                </div>

                <!-- Lista de Folgas -->
                <div class="menu-item" onclick="window.location.href='lista-folgas.html'" style="background: linear-gradient(135deg, #29B6F6, #039BE5);">
                    <i class="fas fa-umbrella-beach" style="color: white;"></i>
                    <h3 style="color: white;">Calendário de Folgas</h3>
                    <p style="color: rgba(255,255,255,0.9);">Visualize todas as folgas registradas</p>
                </div>

                <!-- Calendário de Férias -->
                <div class="menu-item" onclick="window.location.href='calendario.html'" style="background: linear-gradient(135deg, #03A9F4, #0288D1);">
                    <i class="fas fa-calendar-week" style="color: white;"></i>
                    <h3 style="color: white;">Calendário de Férias</h3>
                    <p style="color: rgba(255,255,255,0.9);">Visualize o calendário completo de férias</p>
                </div>

                <!-- Notas Adesivas (NOVO) -->
                <div class="menu-item"
                     onclick="window.open('notas-adesivas.html', '_blank')"
                     style="background: linear-gradient(135deg, #FFC107, #FFA000);">
                    <i class="fas fa-sticky-note" style="color: white;"></i>
                    <h3 style="color: white;">Notas Adesivas</h3>
                    <p style="color: rgba(255,255,255,0.9);">Crie e edite notas livremente</p>
                </div>

                <!-- Atividades -->
                <div class="menu-item" onclick="window.location.href='atividades.html'" style="background: linear-gradient(135deg, #1976D2, #1565C0);">
                    <i class="fas fa-chart-bar" style="color: white;"></i>
                    <h3 style="color: white;">Informações Rápidas</h3>
                    <p style="color: rgba(255,255,255,0.9);">Visualize seus saldos e próximos eventos</p>
                </div>

                <!-- Perfil -->
                <div class="menu-item" onclick="window.location.href='perfil.html'" style="background: linear-gradient(135deg, #2196F3, #1976D2);">
                    <i class="fas fa-user" style="color: white;"></i>
                    <h3 style="color: white;">Perfil</h3>
                    <p style="color: rgba(255,255,255,0.9);">Gerencie suas informações</p>
                </div>

                <!-- Feriados -->
                <div class="menu-item" id="btnFeriados" style="background: linear-gradient(135deg, #0288D1, #0277BD);">
                    <i class="fas fa-calendar" style="color: white;"></i>
                    <h3 style="color: white;">Feriados 2025</h3>
                    <p style="color: rgba(255,255,255,0.9);">Consulte os feriados do ano</p>
                </div>

                <!-- Aniversários -->
                <div class="menu-item" onclick="window.location.href='aniversarios.html'" style="background: linear-gradient(135deg, #26C6DA, #00BCD4);">
                    <i class="fas fa-birthday-cake" style="color: white;"></i>
                    <h3 style="color: white;">Aniversários</h3>
                    <p style="color: rgba(255,255,255,0.9);">Lista de aniversariantes</p>
                </div>

                <!-- Configurações -->
                <div class="menu-item" onclick="window.location.href='configuracoes.html'" style="background: linear-gradient(135deg, #4FC3F7, #29B6F6);">
                    <i class="fas fa-cogs" style="color: white;"></i>
                    <h3 style="color: white;">Configurações</h3>
                    <p style="color: rgba(255,255,255,0.9);">Ajustes do sistema</p>
                </div>
            </div>
        </div>
    </div>

    <footer class="text-center py-3">
        <p class="mb-0">&copy; 2025 Criado por: Marcelo S Ribeiro</p>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module">
        // Importações do Firebase
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';
        import { getAuth, signOut, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';
        import { getDatabase, ref, get, onValue } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js';

        // Configuração do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyAnPLwZO5i_Ky0nBfI14gzNsRqvVMIOqdk",
            authDomain: "controle-func.firebaseapp.com",
            databaseURL: "https://controle-func-default-rtdb.firebaseio.com",
            projectId: "controle-func",
            storageBucket: "controle-func.firebasestorage.app",
            messagingSenderId: "146164640694",
            appId: "1:146164640694:web:d52beaeaa4b1b38cc76f17"
        };

        // Inicializar Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getDatabase(app);

        // Função de logout
        window.logout = async function() {
            try {
                await signOut(auth);
                window.location.href = 'index.html';
            } catch (error) {
                console.error('Erro ao fazer logout:', error);
            }
        }

        // Função para formatar data no padrão brasileiro
        function formatarDataBR(data) {
            const [ano, mes, dia] = data.split('-');
            return `${dia}/${mes}/${ano}`;
        }

        // Função para verificar próximo plantão
        async function verificarProximoPlantao(userId) {
            const alertaPlantao = document.getElementById('alertaPlantao');
            const hoje = new Date();
            hoje.setHours(0, 0, 0, 0);

            try {
                const plantoesRef = ref(db, `plantoes/${userId}/registros`);
                const snapshot = await get(plantoesRef);
                
                if (!snapshot.exists()) {
                    console.log('Nenhum plantão encontrado');
                    alertaPlantao.innerHTML = `
                        <i class="fas fa-info-circle"></i>
                        Nenhum plantão futuro encontrado
                    `;
                    return;
                }

                let proximoPlantao = null;
                let dataProximoPlantao = null;

                snapshot.forEach((childSnapshot) => {
                    const plantao = childSnapshot.val();
                    console.log('Verificando plantão:', plantao);

                    if (plantao.status === 'cancelado' || plantao.status === 'Cancelado') {
                        return;
                    }

                    let dataPlantao;
                    if (plantao.data && plantao.data.includes('/')) {
                        const [dia, mes, ano] = plantao.data.split('/');
                        dataPlantao = new Date(ano, mes - 1, dia);
                    } else if (plantao.data && plantao.data.includes('-')) {
                        // Data no formato ISO (YYYY-MM-DD)
                        const [ano, mes, dia] = plantao.data.split('-');
                        dataPlantao = new Date(ano, mes - 1, dia);
                    } else if (plantao.data) {
                        dataPlantao = new Date(plantao.data);
                    } else {
                        return;
                    }

                    dataPlantao.setHours(0, 0, 0, 0);
                    console.log('Data do plantão convertida:', dataPlantao.toISOString());

                    if (dataPlantao >= hoje && (!proximoPlantao || dataPlantao < dataProximoPlantao)) {
                        proximoPlantao = plantao;
                        dataProximoPlantao = dataPlantao;
                    }
                });

                if (proximoPlantao) {
                    console.log('Próximo plantão encontrado:', proximoPlantao);
                    console.log('Data do próximo plantão:', dataProximoPlantao.toISOString());
                    
                    // Calcular diferença de dias
                    const diffTime = dataProximoPlantao - hoje;
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    
                    console.log('Diferença em dias:', diffDays);
                    
                    // Formatar data para exibição
                    let dataFormatada = '';
                    if (diffDays === 0) {
                        dataFormatada = 'Hoje';
                    } else if (diffDays === 1) {
                        dataFormatada = 'Amanhã';
                    } else {
                        dataFormatada = `Em ${diffDays} dias`;
                    }
                    
                    // Formatar a data no padrão dd/mm/yyyy
                    const dia = String(dataProximoPlantao.getDate()).padStart(2, '0');
                    const mes = String(dataProximoPlantao.getMonth() + 1).padStart(2, '0');
                    const ano = dataProximoPlantao.getFullYear();
                    const dataBR = `${dia}/${mes}/${ano}`;
                    
                    console.log('Data formatada BR:', dataBR);
                    
                    // Adicionar dia da semana
                    const diasSemana = ['Domingo', 'Segunda-feira', 'Terça-feira', 'Quarta-feira', 'Quinta-feira', 'Sexta-feira', 'Sábado'];
                    const diaSemana = diasSemana[dataProximoPlantao.getDay()];
                    
                    dataFormatada += ` (${diaSemana}, ${dataBR})`;
                    
                    if (diffDays > 0) {
                        alertaPlantao.innerHTML = `
                            <div class="alerta-titulo">
                                <i class="fas fa-clock alerta-icone"></i>
                                Próximo Plantão
                            </div>
                            <div class="alerta-conteudo">
                                ${dataFormatada}
                            </div>
                        `;
                        alertaPlantao.style.backgroundColor = '#fff3cd';
                        alertaPlantao.style.color = '#856404';
                        alertaPlantao.style.borderLeftColor = '#ffc107';
                    } else if (diffDays === 0) {
                        alertaPlantao.innerHTML = `
                            <div class="alerta-titulo">
                                <i class="fas fa-exclamation-circle alerta-icone"></i>
                                Próximo Plantão
                            </div>
                            <div class="alerta-conteudo">
                                ${dataFormatada}
                            </div>
                        `;
                        alertaPlantao.style.backgroundColor = '#d4edda';
                        alertaPlantao.style.color = '#155724';
                        alertaPlantao.style.borderLeftColor = '#28a745';
                    }
                } else {
                    console.log('Nenhum próximo plantão encontrado');
                    alertaPlantao.innerHTML = `
                        <i class="fas fa-info-circle"></i>
                        Nenhum plantão futuro encontrado
                    `;
                }
            } catch (error) {
                console.error('Erro ao verificar próximo plantão:', error);
                alertaPlantao.innerHTML = `
                    <i class="fas fa-exclamation-triangle"></i>
                    Erro ao verificar próximo plantão
                `;
            }
        }
        
        // Função para verificar próximo dia de trabalho presencial
        async function verificarProximoDiaPresencial(userId) {
            try {
                const trabalhoRef = ref(db, `trabalho/${userId}`);
                const snapshot = await get(trabalhoRef);
                
                if (snapshot.exists() && snapshot.val().registros) {
                    const hoje = new Date();
                    hoje.setHours(0, 0, 0, 0);
                    
                    let proximoPresencial = null;
                    const registros = Object.values(snapshot.val().registros);
                    
                    // Encontrar o próximo dia presencial
                    for (const registro of registros) {
                        // Verificar se é um registro de trabalho presencial
                        if (registro.modalidade === 'presencial') {
                            // Converter a data para um objeto Date
                            const dataOriginal = new Date(registro.dataTrabalho || registro.data);
                            const dataAjustada = new Date(dataOriginal.getTime() + dataOriginal.getTimezoneOffset() * 60000);
                            const dataReg = new Date(dataAjustada.getFullYear(), dataAjustada.getMonth(), dataAjustada.getDate());
                            
                            // Verificar se a data é futura
                            if (dataReg >= hoje) {
                                if (!proximoPresencial || dataReg < new Date(proximoPresencial.dataAjustada)) {
                                    proximoPresencial = {
                                        ...registro,
                                        dataAjustada: dataReg
                                    };
                                }
                            }
                        }
                    }
                    
                    // Se encontramos um próximo dia presencial
                    if (proximoPresencial) {
                        const diasFaltando = Math.ceil((proximoPresencial.dataAjustada - hoje) / (1000 * 60 * 60 * 24));
                        
                        // Formatar a data para exibição
                        const dataFormatada = proximoPresencial.dataAjustada.toLocaleDateString('pt-BR');
                        
                        const alertaPresencial = document.getElementById('alertaPresencial');
                        if (!alertaPresencial) {
                            alertaPresencial = document.createElement('div');
                            alertaPresencial.id = 'alertaPresencial';
                            alertaPresencial.className = 'alerta-plantao';
                            
                            // Inserir após o alertaPlantao
                            const alertaPlantao = document.getElementById('alertaPlantao');
                            if (alertaPlantao) {
                                alertaPlantao.parentNode.insertBefore(alertaPresencial, alertaPlantao.nextSibling);
                            }
                        }
                        
                        // Atualizar o conteúdo
                        if (diasFaltando > 0) {
                            alertaPresencial.innerHTML = `
                                <i class="fas fa-building"></i>
                                Seu próximo dia presencial será em ${diasFaltando} dia${diasFaltando > 1 ? 's' : ''} (${dataFormatada})
                            `;
                            alertaPresencial.style.backgroundColor = '#fff3cd';
                            alertaPresencial.style.color = '#856404';
                            alertaPresencial.style.borderLeftColor = '#ffc107';
                        } else if (diasFaltando === 0) {
                            alertaPresencial.innerHTML = `
                                <i class="fas fa-building"></i>
                                Seu dia presencial é hoje! (${dataFormatada})
                            `;
                            alertaPresencial.style.backgroundColor = '#cce5ff';
                            alertaPresencial.style.color = '#004085';
                            alertaPresencial.style.borderLeftColor = '#007bff';
                        }
                    }
                }
            } catch (error) {
                console.error('Erro ao verificar próximo dia presencial:', error);
            }
        }

        // Verificar autenticação do usuário
        auth.onAuthStateChanged(async (user) => {
            if (user) {
                // Verificar se o usuário está logado no localStorage
                const usuarioLogado = JSON.parse(localStorage.getItem('usuarioLogado'));
                if (usuarioLogado && usuarioLogado.nome) {
                    document.getElementById('nomeUsuario').textContent = usuarioLogado.nome;
                    verificarProximoPlantao(user.uid);
                } else {
                    window.location.href = 'index.html';
                }
            } else {
                window.location.href = 'index.html';
            }
        });

        // Inicializar verificações
        document.addEventListener('DOMContentLoaded', () => {
            const usuarioLogado = JSON.parse(localStorage.getItem('usuarioLogado'));
            if (usuarioLogado && usuarioLogado.uid) {
                verificarProximoPlantao(usuarioLogado.uid);
            }
        });
    </script>

    <!-- Adicionar o modal de Feriados -->
    <div class="modal fade" id="feriadosModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-calendar-alt"></i>
                        Feriados e Pontos Facultativos 2025
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="feriados-container">
                        <!-- Janeiro -->
                        <div class="feriados-mes">
                            <h2><i class="fas fa-calendar-alt"></i> Janeiro 2025</h2>
                            <div class="feriado-item">
                                <div class="feriado-data">
                                    <span class="feriado-data-dia">01</span>
                                    <span class="feriado-data-mes">JAN</span>
                                    <span class="feriado-data-dia-semana">Quarta-feira</span>
                                </div>
                                <div class="feriado-info">
                                    <div class="feriado-nome">Confraternização Universal</div>
                                    <div class="feriado-tipo">
                                        <i class="fas fa-star"></i>
                                        <span>Feriado Nacional</span>
                                    </div>
                                </div>
                            </div>
                            <div class="feriado-item">
                                <div class="feriado-data">
                                    <span class="feriado-data-dia">25</span>
                                    <span class="feriado-data-mes">JAN</span>
                                    <span class="feriado-data-dia-semana">Sábado</span>
                                </div>
                                <div class="feriado-info">
                                    <div class="feriado-nome">Aniversário de São Paulo</div>
                                    <div class="feriado-tipo">
                                        <i class="fas fa-map-marker-alt"></i>
                                        <span>Feriado Municipal</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Fevereiro -->
                        <div class="feriados-mes">
                            <h2><i class="fas fa-calendar-alt"></i> Fevereiro 2025</h2>
                            <div class="feriado-item">
                                <div class="feriado-data">
                                    <span class="feriado-data-dia">12</span>
                                    <span class="feriado-data-mes">FEV</span>
                                    <span class="feriado-data-dia-semana">Quarta-feira</span>
                                </div>
                                <div class="feriado-info">
                                    <div class="feriado-nome">Carnaval</div>
                                    <div class="feriado-tipo">
                                        <i class="fas fa-star"></i>
                                        <span>Ponto Facultativo</span>
                                    </div>
                                </div>
                            </div>
                            <div class="feriado-item">
                                <div class="feriado-data">
                                    <span class="feriado-data-dia">13</span>
                                    <span class="feriado-data-mes">FEV</span>
                                    <span class="feriado-data-dia-semana">Quinta-feira</span>
                                </div>
                                <div class="feriado-info">
                                    <div class="feriado-nome">Quarta-feira de Cinzas</div>
                                    <div class="feriado-tipo">
                                        <i class="fas fa-star"></i>
                                        <span>Ponto Facultativo até 14h</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Março -->
                        <div class="feriados-mes">
                            <h2><i class="fas fa-calendar-alt"></i> Março 2025</h2>
                            <div class="feriado-item">
                                <div class="feriado-data">
                                    <span class="feriado-data-dia">29</span>
                                    <span class="feriado-data-mes">MAR</span>
                                </div>
                                <div class="feriado-info">
                                    <div class="feriado-nome">Sexta-feira Santa</div>
                                    <div class="feriado-tipo">
                                        <i class="fas fa-star"></i>
                                        <span>Feriado Nacional</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Abril -->
                        <div class="feriados-mes">
                            <h2><i class="fas fa-calendar-alt"></i> Abril 2025</h2>
                            <div class="feriado-item">
                                <div class="feriado-data">
                                    <span class="feriado-data-dia">21</span>
                                    <span class="feriado-data-mes">ABR</span>
                                </div>
                                <div class="feriado-info">
                                    <div class="feriado-nome">Tiradentes</div>
                                    <div class="feriado-tipo">
                                        <i class="fas fa-star"></i>
                                        <span>Feriado Nacional</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Maio -->
                        <div class="feriados-mes">
                            <h2><i class="fas fa-calendar-alt"></i> Maio 2025</h2>
                            <div class="feriado-item">
                                <div class="feriado-data">
                                    <span class="feriado-data-dia">01</span>
                                    <span class="feriado-data-mes">MAI</span>
                                </div>
                                <div class="feriado-info">
                                    <div class="feriado-nome">Dia Mundial do Trabalho</div>
                                    <div class="feriado-tipo">
                                        <i class="fas fa-star"></i>
                                        <span>Feriado Nacional</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Junho -->
                        <div class="feriados-mes">
                            <h2><i class="fas fa-calendar-alt"></i> Junho 2025</h2>
                            <div class="feriado-item">
                                <div class="feriado-data">
                                    <span class="feriado-data-dia">20</span>
                                    <span class="feriado-data-mes">JUN</span>
                                </div>
                                <div class="feriado-info">
                                    <div class="feriado-nome">Corpus Christi</div>
                                    <div class="feriado-tipo">
                                        <i class="fas fa-star"></i>
                                        <span>Ponto Facultativo</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Julho -->
                        <div class="feriados-mes">
                            <h2><i class="fas fa-calendar-alt"></i> Julho 2025</h2>
                            <div class="feriado-item">
                                <div class="feriado-data">
                                    <span class="feriado-data-dia">09</span>
                                    <span class="feriado-data-mes">JUL</span>
                                </div>
                                <div class="feriado-info">
                                    <div class="feriado-nome">Revolução Constitucionalista</div>
                                    <div class="feriado-tipo">
                                        <i class="fas fa-map-marker-alt"></i>
                                        <span>Feriado Estadual SP</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Setembro -->
                        <div class="feriados-mes">
                            <h2><i class="fas fa-calendar-alt"></i> Setembro 2025</h2>
                            <div class="feriado-item">
                                <div class="feriado-data">
                                    <span class="feriado-data-dia">07</span>
                                    <span class="feriado-data-mes">SET</span>
                                </div>
                                <div class="feriado-info">
                                    <div class="feriado-nome">Independência do Brasil</div>
                                    <div class="feriado-tipo">
                                        <i class="fas fa-star"></i>
                                        <span>Feriado Nacional</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Outubro -->
                        <div class="feriados-mes">
                            <h2><i class="fas fa-calendar-alt"></i> Outubro 2025</h2>
                            <div class="feriado-item">
                                <div class="feriado-data">
                                    <span class="feriado-data-dia">12</span>
                                    <span class="feriado-data-mes">OUT</span>
                                </div>
                                <div class="feriado-info">
                                    <div class="feriado-nome">Nossa Senhora Aparecida</div>
                                    <div class="feriado-tipo">
                                        <i class="fas fa-star"></i>
                                        <span>Feriado Nacional</span>
                                    </div>
                                </div>
                            </div>
                            <div class="feriado-item">
                                <div class="feriado-data">
                                    <span class="feriado-data-dia">28</span>
                                    <span class="feriado-data-mes">OUT</span>
                                </div>
                                <div class="feriado-info">
                                    <div class="feriado-nome">Dia do Servidor Público</div>
                                    <div class="feriado-tipo">
                                        <i class="fas fa-star"></i>
                                        <span>Ponto Facultativo</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Novembro -->
                        <div class="feriados-mes">
                            <h2><i class="fas fa-calendar-alt"></i> Novembro 2025</h2>
                            <div class="feriado-item">
                                <div class="feriado-data">
                                    <span class="feriado-data-dia">02</span>
                                    <span class="feriado-data-mes">NOV</span>
                                </div>
                                <div class="feriado-info">
                                    <div class="feriado-nome">Finados</div>
                                    <div class="feriado-tipo">
                                        <i class="fas fa-star"></i>
                                        <span>Feriado Nacional</span>
                                    </div>
                                </div>
                            </div>
                            <div class="feriado-item">
                                <div class="feriado-data">
                                    <span class="feriado-data-dia">15</span>
                                    <span class="feriado-data-mes">NOV</span>
                                </div>
                                <div class="feriado-info">
                                    <div class="feriado-nome">Proclamação da República</div>
                                    <div class="feriado-tipo">
                                        <i class="fas fa-star"></i>
                                        <span>Feriado Nacional</span>
                                    </div>
                                </div>
                            </div>
                            <div class="feriado-item">
                                <div class="feriado-data">
                                    <span class="feriado-data-dia">20</span>
                                    <span class="feriado-data-mes">NOV</span>
                                </div>
                                <div class="feriado-info">
                                    <div class="feriado-nome">Consciência Negra</div>
                                    <div class="feriado-tipo">
                                        <i class="fas fa-map-marker-alt"></i>
                                        <span>Feriado Municipal</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Dezembro -->
                        <div class="feriados-mes">
                            <h2><i class="fas fa-calendar-alt"></i> Dezembro 2025</h2>
                            <div class="feriado-item">
                                <div class="feriado-data">
                                    <span class="feriado-data-dia">24</span>
                                    <span class="feriado-data-mes">DEZ</span>
                                </div>
                                <div class="feriado-info">
                                    <div class="feriado-nome">Véspera de Natal</div>
                                    <div class="feriado-tipo">
                                        <i class="fas fa-star"></i>
                                        <span>Ponto Facultativo após 14h</span>
                                    </div>
                                </div>
                            </div>
                            <div class="feriado-item">
                                <div class="feriado-data">
                                    <span class="feriado-data-dia">25</span>
                                    <span class="feriado-data-mes">DEZ</span>
                                </div>
                                <div class="feriado-info">
                                    <div class="feriado-nome">Natal</div>
                                    <div class="feriado-tipo">
                                        <i class="fas fa-star"></i>
                                        <span>Feriado Nacional</span>
                                    </div>
                                </div>
                            </div>
                            <div class="feriado-item">
                                <div class="feriado-data">
                                    <span class="feriado-data-dia">31</span>
                                    <span class="feriado-data-mes">DEZ</span>
                                </div>
                                <div class="feriado-info">
                                    <div class="feriado-nome">Véspera de Ano Novo</div>
                                    <div class="feriado-tipo">
                                        <i class="fas fa-star"></i>
                                        <span>Ponto Facultativo após 14h</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Adicionar script para o modal -->
    <script>
        // Funções auxiliares para formatação
        function getTipoIcon(tipo) {
            switch(tipo.toUpperCase()) {
                case 'NACIONAL': return 'fa-star';
                case 'FACULTATIVO': return 'fa-clock';
                case 'RECESSO': return 'fa-home';
                case 'ESTADUAL': return 'fa-map-marker-alt';
                case 'MUNICIPAL': return 'fa-city';
                default: return 'fa-calendar';
            }
        }

        function formatTipoFeriado(tipo) {
            switch(tipo.toUpperCase()) {
                case 'NACIONAL': return 'Feriado Nacional';
                case 'FACULTATIVO': return 'Ponto Facultativo';
                case 'RECESSO': return 'Recesso';
                case 'ESTADUAL': return 'Feriado Estadual';
                case 'MUNICIPAL': return 'Feriado Municipal';
                default: return tipo;
            }
        }

        document.getElementById('btnFeriados').addEventListener('click', async () => {
            try {
                const response = await fetch('feriados_2025.json');
                const feriados = await response.json();
                
                let feriadosHTML = '';
                let mesAtual = '';
                let proximoFeriadoEncontrado = false;
                const hoje = new Date();
                
                feriados.forEach(feriado => {
                    const [dia, mes, ano] = feriado.data.split('/');
                    const data = new Date(ano, mes - 1, dia);
                    const diaSemana = data.toLocaleDateString('pt-BR', { 
                        weekday: 'long'
                    });
                    const nomeMes = data.toLocaleDateString('pt-BR', { 
                        month: 'long'
                    });
                    
                    const jaPassou = data < hoje;
                    
                    if (nomeMes !== mesAtual) {
                        if (mesAtual !== '') {
                            feriadosHTML += '</div>';
                        }
                        mesAtual = nomeMes;
                        feriadosHTML += `
                            <div class="feriados-mes">
                                <h2><i class="fas fa-calendar-alt"></i> ${nomeMes} 2025</h2>
                        `;
                    }
                    
                    // Adicionar ID se for o próximo feriado
                    const isProximoFeriado = !jaPassou && !proximoFeriadoEncontrado;
                    if (isProximoFeriado) {
                        proximoFeriadoEncontrado = true;
                    }
                    
                    feriadosHTML += `
                        <div class="feriado-item ${jaPassou ? 'passado' : ''}" ${isProximoFeriado ? 'id="proximoFeriado"' : ''}>
                            <div class="feriado-data">
                                <span class="feriado-data-dia">${dia}</span>
                                <span class="feriado-data-mes">${nomeMes.substring(0,3).toUpperCase()}</span>
                                <span class="feriado-data-dia-semana">${diaSemana}</span>
                            </div>
                            <div class="feriado-info">
                                <div class="feriado-nome">${feriado.nome}</div>
                                <div class="feriado-tipo">
                                    <i class="fas ${getTipoIcon(feriado.tipo)}"></i>
                                    <span>${formatTipoFeriado(feriado.tipo)}</span>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                if (mesAtual !== '') {
                    feriadosHTML += '</div>';
                }
                
                document.querySelector('.feriados-container').innerHTML = feriadosHTML;
                
                // Mostrar o modal
                const feriadosModal = new bootstrap.Modal(document.getElementById('feriadosModal'));
                feriadosModal.show();

                // Rolar até o próximo feriado após o modal abrir
                feriadosModal._element.addEventListener('shown.bs.modal', () => {
                    const proximoFeriado = document.getElementById('proximoFeriado');
                    if (proximoFeriado) {
                        proximoFeriado.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        proximoFeriado.style.animation = 'highlight 2s ease';
                    }
                });
            } catch (error) {
                console.error('Erro ao carregar feriados:', error);
                alert('Erro ao carregar feriados. Por favor, tente novamente.');
            }
        });
    </script>

    <script>
        // Carregar dados do usuário do localStorage
        const usuarioLogado = JSON.parse(localStorage.getItem('usuarioLogado'));
        if (!usuarioLogado) {
            window.location.href = 'index.html';
        }

        // Verificar próximo plantão
        async function verificarProximoPlantao(userId) {
            const alertaPlantao = document.getElementById('alertaPlantao');
            const hoje = new Date();
            hoje.setHours(0, 0, 0, 0);

            try {
                console.log('Verificando plantões para usuário:', userId);
                
                // Buscar dados do localStorage
                const dadosSalvos = localStorage.getItem('dadosPlantao');
                console.log('Dados salvos:', dadosSalvos);
                
                if (!dadosSalvos) {
                    console.log('Nenhum dado de plantão encontrado no localStorage');
                    return;
                }

                const dados = JSON.parse(dadosSalvos);
                console.log('Dados parseados:', dados);
                
                const historicoPlantao = dados.historicoPlantao || [];
                console.log('Histórico de plantão:', historicoPlantao);

                if (historicoPlantao.length > 0) {
                    const plantoesFuturos = historicoPlantao
                        .filter(plantao => {
                            if (!plantao.data) return false;
                            
                            // Converter a data para um objeto Date
                            let dataInicio;
                            if (plantao.data.includes('/')) {
                                const [dia, mes, ano] = plantao.data.split('/');
                                dataInicio = new Date(ano, mes - 1, dia);
                            } else {
                                dataInicio = new Date(plantao.data);
                            }
                            dataInicio.setHours(0, 0, 0, 0);
                            
                            const ehFuturo = dataInicio >= hoje;
                            
                            console.log('Verificando plantão:', {
                                data: plantao.data,
                                dataInicioObj: dataInicio,
                                hoje: hoje,
                                ehFuturo: ehFuturo
                            });
                            
                            return ehFuturo;
                        })
                        .sort((a, b) => {
                            const getDate = (data) => {
                                if (data.includes('/')) {
                                    const [dia, mes, ano] = data.split('/');
                                    return new Date(ano, mes - 1, dia);
                                }
                                return new Date(data);
                            };
                            return getDate(a.data) - getDate(b.data);
                        });

                    console.log('Plantões futuros encontrados:', plantoesFuturos);

                    const proximoPlantao = plantoesFuturos[0];
                    
                    if (proximoPlantao) {
                        console.log('Próximo plantão:', proximoPlantao);
                        
                        // Converter a data para exibição
                        const [dia, mes, ano] = proximoPlantao.data.split('/');
                        const dataInicio = new Date(ano, mes - 1, dia);
                        const diasFaltando = Math.ceil((dataInicio - hoje) / (1000 * 60 * 60 * 24));
                        
                        // Adicionar dia da semana
                        const diasSemana = ['Domingo', 'Segunda-feira', 'Terça-feira', 'Quarta-feira', 'Quinta-feira', 'Sexta-feira', 'Sábado'];
                        const diaSemana = diasSemana[dataInicio.getDay()];
                        
                        if (diasFaltando >= 0) {
                            alertaPlantao.innerHTML = `
                                <div class="alerta-titulo">
                                    <i class="fas fa-clock alerta-icone"></i>
                                    Próximo Plantão
                                </div>
                                <div class="alerta-conteudo">
                                    ${diasFaltando === 0 ? 'Hoje!' : `Em ${diasFaltando} dia${diasFaltando > 1 ? 's' : ''}`}
                                    (${diaSemana}, ${proximoPlantao.data})
                                </div>
                            `;
                            alertaPlantao.style.display = 'block';
                            alertaPlantao.style.backgroundColor = diasFaltando === 0 ? '#d4edda' : '#fff3cd';
                            alertaPlantao.style.color = diasFaltando === 0 ? '#155724' : '#856404';
                            alertaPlantao.style.borderLeftColor = diasFaltando === 0 ? '#28a745' : '#ffc107';
                        }
                    } else {
                        alertaPlantao.innerHTML = `
                            <div class="alerta-titulo">
                                <i class="fas fa-info-circle alerta-icone"></i>
                                Plantão
                            </div>
                            <div class="alerta-conteudo">
                                Nenhum plantão agendado
                            </div>
                        `;
                        alertaPlantao.style.display = 'block';
                        alertaPlantao.style.backgroundColor = '#e2e3e5';
                        alertaPlantao.style.color = '#383d41';
                        alertaPlantao.style.borderLeftColor = '#d6d8db';
                    }
                } else {
                    alertaPlantao.innerHTML = `
                        <div class="alerta-titulo">
                            <i class="fas fa-info-circle alerta-icone"></i>
                            Plantão
                        </div>
                        <div class="alerta-conteudo">
                            Nenhum plantão registrado
                        </div>
                    `;
                    alertaPlantao.style.display = 'block';
                    alertaPlantao.style.backgroundColor = '#e2e3e5';
                    alertaPlantao.style.color = '#383d41';
                    alertaPlantao.style.borderLeftColor = '#d6d8db';
                }
            } catch (error) {
                console.error('Erro ao verificar próximo plantão:', error);
                alertaPlantao.innerHTML = `
                    <div class="alerta-titulo">
                        <i class="fas fa-exclamation-triangle alerta-icone"></i>
                        Erro
                    </div>
                    <div class="alerta-conteudo">
                        Erro ao carregar informações de plantão
                    </div>
                `;
                alertaPlantao.style.display = 'block';
                alertaPlantao.style.backgroundColor = '#f8d7da';
                alertaPlantao.style.color = '#721c24';
                alertaPlantao.style.borderLeftColor = '#dc3545';
            }
        }

        // Verificar próximas férias
        async function verificarProximasFerias(userId) {
            const alertaFerias = document.getElementById('alertaFerias');
            const hoje = new Date();
            hoje.setHours(0, 0, 0, 0);

            try {
                console.log('Verificando férias para usuário:', userId);
                
                // Array para armazenar todos os períodos de férias
                let historicoFerias = [];
                
                // 1. Tentar buscar do Firebase primeiro
                try {
                    const userRef = ref(database, `users/${userId}`);
                    const snapshot = await get(userRef);
                    const userData = snapshot.val();
                    
                    if (userData && userData.historicoFerias && userData.historicoFerias.length > 0) {
                        userData.historicoFerias.forEach(ferias => {
                            historicoFerias.push({
                                periodo: ferias.dataInicio,
                                diasFerias: ferias.diasFerias
                            });
                        });
                    }
                } catch (firebaseError) {
                    console.log('Erro ao buscar do Firebase:', firebaseError);
                }
                
                // 2. Buscar também do localStorage
                const dadosSalvos = localStorage.getItem('dadosFerias');
                if (dadosSalvos) {
                    const dados = JSON.parse(dadosSalvos);
                    if (dados.historicoFerias) {
                        historicoFerias = historicoFerias.concat(dados.historicoFerias);
                    }
                }
                
                console.log('Total de períodos de férias encontrados:', historicoFerias.length);

                if (historicoFerias.length > 0) {
                    const feriasFuturas = historicoFerias
                        .filter(ferias => {
                            if (!ferias.periodo) return false;
                            
                            // Converter a data para um objeto Date
                            let dataInicio;
                            if (ferias.periodo.includes('/')) {
                                const [dia, mes, ano] = ferias.periodo.split('/');
                                dataInicio = new Date(ano, mes - 1, dia);
                            } else {
                                dataInicio = new Date(ferias.periodo);
                            }
                            dataInicio.setHours(0, 0, 0, 0);
                            
                            const ehFuturo = dataInicio >= hoje;
                            
                            console.log('Verificando férias:', {
                                periodo: ferias.periodo,
                                dataInicioObj: dataInicio,
                                hoje: hoje,
                                ehFuturo: ehFuturo
                            });
                            
                            return ehFuturo;
                        })
                        .sort((a, b) => {
                            const getDate = (data) => {
                                if (data.includes('/')) {
                                    const [dia, mes, ano] = data.split('/');
                                    return new Date(ano, mes - 1, dia);
                                }
                                return new Date(data);
                            };
                            return getDate(a.periodo) - getDate(b.periodo);
                        });

                    console.log('Férias futuras encontradas:', feriasFuturas);

                    const proximasFerias = feriasFuturas[0];
                    
                    if (proximasFerias) {
                        console.log('Próximas férias:', proximasFerias);
                        
                        // Converter a data para exibição
                        let dataInicio;
                        if (proximasFerias.periodo.includes('/')) {
                            const [dia, mes, ano] = proximasFerias.periodo.split('/');
                            dataInicio = new Date(ano, mes - 1, dia);
                        } else {
                            dataInicio = new Date(proximasFerias.periodo);
                        }
                        
                        const diasFaltando = Math.ceil((dataInicio - hoje) / (1000 * 60 * 60 * 24));
                        
                        // Adicionar dia da semana
                        const diasSemana = ['Domingo', 'Segunda-feira', 'Terça-feira', 'Quarta-feira', 'Quinta-feira', 'Sexta-feira', 'Sábado'];
                        const diaSemana = diasSemana[dataInicio.getDay()];
                        
                        // Formatar a data para exibição
                        const dataFormatada = dataInicio.toLocaleDateString('pt-BR');
                        
                        if (diasFaltando >= 0) {
                            alertaFerias.innerHTML = `
                                <div class="alerta-titulo">
                                    <i class="fas fa-umbrella-beach alerta-icone"></i>
                                    Suas Próximas Férias
                                </div>
                                <div class="alerta-conteudo">
                                    ${diasFaltando === 0 ? 'Começam hoje!' : `Em ${diasFaltando} dia${diasFaltando > 1 ? 's' : ''}`}
                                    (${diaSemana}, ${dataFormatada})
                                </div>
                            `;
                            alertaFerias.style.display = 'block';
                            alertaFerias.style.backgroundColor = diasFaltando === 0 ? '#d4edda' : '#fff3cd';
                            alertaFerias.style.color = diasFaltando === 0 ? '#155724' : '#856404';
                            alertaFerias.style.borderLeftColor = diasFaltando === 0 ? '#28a745' : '#ffc107';
                        }
                    } else {
                        alertaFerias.innerHTML = `
                            <div class="alerta-titulo">
                                <i class="fas fa-info-circle alerta-icone"></i>
                                Suas Férias
                            </div>
                            <div class="alerta-conteudo">
                                Nenhuma férias agendada
                            </div>
                        `;
                        alertaFerias.style.display = 'block';
                        alertaFerias.style.backgroundColor = '#e2e3e5';
                        alertaFerias.style.color = '#383d41';
                        alertaFerias.style.borderLeftColor = '#d6d8db';
                    }
                } else {
                    alertaFerias.innerHTML = `
                        <div class="alerta-titulo">
                            <i class="fas fa-info-circle alerta-icone"></i>
                            Suas Férias
                        </div>
                        <div class="alerta-conteudo">
                            Nenhuma férias registrada
                        </div>
                    `;
                    alertaFerias.style.display = 'block';
                    alertaFerias.style.backgroundColor = '#e2e3e5';
                    alertaFerias.style.color = '#383d41';
                    alertaFerias.style.borderLeftColor = '#d6d8db';
                }
            } catch (error) {
                console.error('Erro ao verificar próximas férias:', error);
                alertaFerias.innerHTML = `
                    <div class="alerta-titulo">
                        <i class="fas fa-exclamation-triangle alerta-icone"></i>
                        Erro
                    </div>
                    <div class="alerta-conteudo">
                        Erro ao carregar informações de férias
                    </div>
                `;
                alertaFerias.style.display = 'block';
                alertaFerias.style.backgroundColor = '#f8d7da';
                alertaFerias.style.color = '#721c24';
                alertaFerias.style.borderLeftColor = '#dc3545';
            }
        }

        // Inicializar verificações
        document.addEventListener('DOMContentLoaded', () => {
            const usuarioLogado = JSON.parse(localStorage.getItem('usuarioLogado'));
            if (usuarioLogado && usuarioLogado.uid) {
                verificarProximoPlantao(usuarioLogado.uid);
                verificarProximasFerias(usuarioLogado.uid);
            }
        });
    </script>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js';
        import { getAuth, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js';
        import { getDatabase, ref, onValue, get, child } from 'https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js';

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAnPLwZO5i_Ky0nBfI14gzNsRqvVMIOqdk",
            authDomain: "controle-func.firebaseapp.com",
            databaseURL: "https://controle-func-default-rtdb.firebaseio.com",
            projectId: "controle-func",
            storageBucket: "controle-func.firebasestorage.app",
            messagingSenderId: "146164640694",
            appId: "1:146164640694:web:d52beaeaa4b1b38cc76f17"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth();
        const database = getDatabase();

        // Disponibilizar globalmente
        window.auth = auth;
        window.database = database;
        window.ref = ref;
        window.onValue = onValue;
        window.get = get;
        window.child = child;

        // Verificar autenticação
        onAuthStateChanged(auth, (user) => {
            if (!user) {
                window.location.href = 'index.html';
            }
        });
    </script>

    <script>
        // Carregar dados do usuário do localStorage
        const usuarioLogado = JSON.parse(localStorage.getItem('usuarioLogado'));
        if (!usuarioLogado) {
            window.location.href = 'index.html';
        }

        // Verificar próximo plantão
        async function verificarProximoPlantao(userId) {
            const alertaPlantao = document.getElementById('alertaPlantao');
            const hoje = new Date();
            hoje.setHours(0, 0, 0, 0);

            try {
                console.log('Verificando plantões para usuário:', userId);
                
                // Buscar dados do localStorage
                const dadosSalvos = localStorage.getItem('dadosPlantao');
                console.log('Dados salvos:', dadosSalvos);
                
                if (!dadosSalvos) {
                    console.log('Nenhum dado de plantão encontrado no localStorage');
                    return;
                }

                const dados = JSON.parse(dadosSalvos);
                console.log('Dados parseados:', dados);
                
                const historicoPlantao = dados.historicoPlantao || [];
                console.log('Histórico de plantão:', historicoPlantao);

                if (historicoPlantao.length > 0) {
                    const plantoesFuturos = historicoPlantao
                        .filter(plantao => {
                            if (!plantao.data) return false;
                            
                            // Converter a data para um objeto Date
                            let dataInicio;
                            if (plantao.data.includes('/')) {
                                const [dia, mes, ano] = plantao.data.split('/');
                                dataInicio = new Date(ano, mes - 1, dia);
                            } else {
                                dataInicio = new Date(plantao.data);
                            }
                            dataInicio.setHours(0, 0, 0, 0);
                            
                            const ehFuturo = dataInicio >= hoje;
                            
                            console.log('Verificando plantão:', {
                                data: plantao.data,
                                dataInicioObj: dataInicio,
                                hoje: hoje,
                                ehFuturo: ehFuturo
                            });
                            
                            return ehFuturo;
                        })
                        .sort((a, b) => {
                            const getDate = (data) => {
                                if (data.includes('/')) {
                                    const [dia, mes, ano] = data.split('/');
                                    return new Date(ano, mes - 1, dia);
                                }
                                return new Date(data);
                            };
                            return getDate(a.data) - getDate(b.data);
                        });

                    console.log('Plantões futuros encontrados:', plantoesFuturos);

                    const proximoPlantao = plantoesFuturos[0];
                    
                    if (proximoPlantao) {
                        console.log('Próximo plantão:', proximoPlantao);
                        
                        // Converter a data para exibição
                        const [dia, mes, ano] = proximoPlantao.data.split('/');
                        const dataInicio = new Date(ano, mes - 1, dia);
                        const diasFaltando = Math.ceil((dataInicio - hoje) / (1000 * 60 * 60 * 24));
                        
                        // Adicionar dia da semana
                        const diasSemana = ['Domingo', 'Segunda-feira', 'Terça-feira', 'Quarta-feira', 'Quinta-feira', 'Sexta-feira', 'Sábado'];
                        const diaSemana = diasSemana[dataInicio.getDay()];
                        
                        if (diasFaltando >= 0) {
                            alertaPlantao.innerHTML = `
                                <div class="alerta-titulo">
                                    <i class="fas fa-clock alerta-icone"></i>
                                    Próximo Plantão
                                </div>
                                <div class="alerta-conteudo">
                                    ${diasFaltando === 0 ? 'Hoje!' : `Em ${diasFaltando} dia${diasFaltando > 1 ? 's' : ''}`}
                                    (${diaSemana}, ${proximoPlantao.data})
                                </div>
                            `;
                            alertaPlantao.style.display = 'block';
                            alertaPlantao.style.backgroundColor = diasFaltando === 0 ? '#d4edda' : '#fff3cd';
                            alertaPlantao.style.color = diasFaltando === 0 ? '#155724' : '#856404';
                            alertaPlantao.style.borderLeftColor = diasFaltando === 0 ? '#28a745' : '#ffc107';
                        }
                    } else {
                        alertaPlantao.innerHTML = `
                            <div class="alerta-titulo">
                                <i class="fas fa-info-circle alerta-icone"></i>
                                Plantão
                            </div>
                            <div class="alerta-conteudo">
                                Nenhum plantão agendado
                            </div>
                        `;
                        alertaPlantao.style.display = 'block';
                        alertaPlantao.style.backgroundColor = '#e2e3e5';
                        alertaPlantao.style.color = '#383d41';
                        alertaPlantao.style.borderLeftColor = '#d6d8db';
                    }
                } else {
                    alertaPlantao.innerHTML = `
                        <div class="alerta-titulo">
                            <i class="fas fa-info-circle alerta-icone"></i>
                            Plantão
                        </div>
                        <div class="alerta-conteudo">
                            Nenhum plantão registrado
                        </div>
                    `;
                    alertaPlantao.style.display = 'block';
                    alertaPlantao.style.backgroundColor = '#e2e3e5';
                    alertaPlantao.style.color = '#383d41';
                    alertaPlantao.style.borderLeftColor = '#d6d8db';
                }
            } catch (error) {
                console.error('Erro ao verificar próximo plantão:', error);
                alertaPlantao.innerHTML = `
                    <div class="alerta-titulo">
                        <i class="fas fa-exclamation-triangle alerta-icone"></i>
                        Erro
                    </div>
                    <div class="alerta-conteudo">
                        Erro ao carregar informações de plantão
                    </div>
                `;
                alertaPlantao.style.display = 'block';
                alertaPlantao.style.backgroundColor = '#f8d7da';
                alertaPlantao.style.color = '#721c24';
                alertaPlantao.style.borderLeftColor = '#dc3545';
            }
        }

        // Verificar próximas férias
        async function verificarProximasFerias(userId) {
            const alertaFerias = document.getElementById('alertaFerias');
            const hoje = new Date();
            hoje.setHours(0, 0, 0, 0);

            try {
                console.log('Verificando férias para usuário:', userId);
                
                // Array para armazenar todos os períodos de férias
                let historicoFerias = [];
                
                // 1. Tentar buscar do Firebase primeiro
                try {
                    const userRef = ref(database, `users/${userId}`);
                    const snapshot = await get(userRef);
                    const userData = snapshot.val();
                    
                    if (userData && userData.historicoFerias && userData.historicoFerias.length > 0) {
                        userData.historicoFerias.forEach(ferias => {
                            historicoFerias.push({
                                periodo: ferias.dataInicio,
                                diasFerias: ferias.diasFerias
                            });
                        });
                    }
                } catch (firebaseError) {
                    console.log('Erro ao buscar do Firebase:', firebaseError);
                }
                
                // 2. Buscar também do localStorage
                const dadosSalvos = localStorage.getItem('dadosFerias');
                if (dadosSalvos) {
                    const dados = JSON.parse(dadosSalvos);
                    if (dados.historicoFerias) {
                        historicoFerias = historicoFerias.concat(dados.historicoFerias);
                    }
                }
                
                console.log('Total de períodos de férias encontrados:', historicoFerias.length);

                if (historicoFerias.length > 0) {
                    const feriasFuturas = historicoFerias
                        .filter(ferias => {
                            if (!ferias.periodo) return false;
                            
                            // Converter a data para um objeto Date
                            let dataInicio;
                            if (ferias.periodo.includes('/')) {
                                const [dia, mes, ano] = ferias.periodo.split('/');
                                dataInicio = new Date(ano, mes - 1, dia);
                            } else {
                                dataInicio = new Date(ferias.periodo);
                            }
                            dataInicio.setHours(0, 0, 0, 0);
                            
                            const ehFuturo = dataInicio >= hoje;
                            
                            console.log('Verificando férias:', {
                                periodo: ferias.periodo,
                                dataInicioObj: dataInicio,
                                hoje: hoje,
                                ehFuturo: ehFuturo
                            });
                            
                            return ehFuturo;
                        })
                        .sort((a, b) => {
                            const getDate = (data) => {
                                if (data.includes('/')) {
                                    const [dia, mes, ano] = data.split('/');
                                    return new Date(ano, mes - 1, dia);
                                }
                                return new Date(data);
                            };
                            return getDate(a.periodo) - getDate(b.periodo);
                        });

                    console.log('Férias futuras encontradas:', feriasFuturas);

                    const proximasFerias = feriasFuturas[0];
                    
                    if (proximasFerias) {
                        console.log('Próximas férias:', proximasFerias);
                        
                        // Converter a data para exibição
                        let dataInicio;
                        if (proximasFerias.periodo.includes('/')) {
                            const [dia, mes, ano] = proximasFerias.periodo.split('/');
                            dataInicio = new Date(ano, mes - 1, dia);
                        } else {
                            dataInicio = new Date(proximasFerias.periodo);
                        }
                        
                        const diasFaltando = Math.ceil((dataInicio - hoje) / (1000 * 60 * 60 * 24));
                        
                        // Adicionar dia da semana
                        const diasSemana = ['Domingo', 'Segunda-feira', 'Terça-feira', 'Quarta-feira', 'Quinta-feira', 'Sexta-feira', 'Sábado'];
                        const diaSemana = diasSemana[dataInicio.getDay()];
                        
                        // Formatar a data para exibição
                        const dataFormatada = dataInicio.toLocaleDateString('pt-BR');
                        
                        if (diasFaltando >= 0) {
                            alertaFerias.innerHTML = `
                                <div class="alerta-titulo">
                                    <i class="fas fa-umbrella-beach alerta-icone"></i>
                                    Suas Próximas Férias
                                </div>
                                <div class="alerta-conteudo">
                                    ${diasFaltando === 0 ? 'Começam hoje!' : `Em ${diasFaltando} dia${diasFaltando > 1 ? 's' : ''}`}
                                    (${diaSemana}, ${dataFormatada})
                                </div>
                            `;
                            alertaFerias.style.display = 'block';
                            alertaFerias.style.backgroundColor = diasFaltando === 0 ? '#d4edda' : '#fff3cd';
                            alertaFerias.style.color = diasFaltando === 0 ? '#155724' : '#856404';
                            alertaFerias.style.borderLeftColor = diasFaltando === 0 ? '#28a745' : '#ffc107';
                        }
                    } else {
                        alertaFerias.innerHTML = `
                            <div class="alerta-titulo">
                                <i class="fas fa-info-circle alerta-icone"></i>
                                Suas Férias
                            </div>
                            <div class="alerta-conteudo">
                                Nenhuma férias agendada
                            </div>
                        `;
                        alertaFerias.style.display = 'block';
                        alertaFerias.style.backgroundColor = '#e2e3e5';
                        alertaFerias.style.color = '#383d41';
                        alertaFerias.style.borderLeftColor = '#d6d8db';
                    }
                } else {
                    alertaFerias.innerHTML = `
                        <div class="alerta-titulo">
                            <i class="fas fa-info-circle alerta-icone"></i>
                            Suas Férias
                        </div>
                        <div class="alerta-conteudo">
                            Nenhuma férias registrada
                        </div>
                    `;
                    alertaFerias.style.display = 'block';
                    alertaFerias.style.backgroundColor = '#e2e3e5';
                    alertaFerias.style.color = '#383d41';
                    alertaFerias.style.borderLeftColor = '#d6d8db';
                }
            } catch (error) {
                console.error('Erro ao verificar próximas férias:', error);
                alertaFerias.innerHTML = `
                    <div class="alerta-titulo">
                        <i class="fas fa-exclamation-triangle alerta-icone"></i>
                        Erro
                    </div>
                    <div class="alerta-conteudo">
                        Erro ao carregar informações de férias
                    </div>
                `;
                alertaFerias.style.display = 'block';
                alertaFerias.style.backgroundColor = '#f8d7da';
                alertaFerias.style.color = '#721c24';
                alertaFerias.style.borderLeftColor = '#dc3545';
            }
        }

        // Inicializar verificações
        document.addEventListener('DOMContentLoaded', () => {
            const usuarioLogado = JSON.parse(localStorage.getItem('usuarioLogado'));
            if (usuarioLogado && usuarioLogado.uid) {
                verificarProximoPlantao(usuarioLogado.uid);
                verificarProximasFerias(usuarioLogado.uid);
            }
        });
    </script>

    <script>
        // Função para ajustar a data para o próximo dia útil
        function ajustarParaDiaUtil(data) {
            const diaSemana = data.getDay(); // 0 = Domingo, 6 = Sábado
            
            if (diaSemana === 0) { // Domingo
                data.setDate(data.getDate() + 1); // Vai para segunda
            } else if (diaSemana === 6) { // Sábado
                data.setDate(data.getDate() + 2); // Vai para segunda
            }
            
            return data;
        }

        // Verificar próximas férias
        async function verificarProximasFerias(userId) {
            const alertaFerias = document.getElementById('alertaFerias');
            const hoje = new Date();
            hoje.setHours(0, 0, 0, 0);

            try {
                console.log('Verificando férias para usuário:', userId);
                
                // Array para armazenar todos os períodos de férias
                let historicoFerias = [];
                
                // 1. Tentar buscar do Firebase primeiro
                try {
                    const userRef = ref(database, `users/${userId}`);
                    const snapshot = await get(userRef);
                    const userData = snapshot.val();
                    
                    if (userData && userData.historicoFerias && userData.historicoFerias.length > 0) {
                        userData.historicoFerias.forEach(ferias => {
                            historicoFerias.push({
                                periodo: ferias.dataInicio,
                                diasFerias: ferias.diasFerias
                            });
                        });
                    }
                } catch (firebaseError) {
                    console.log('Erro ao buscar do Firebase:', firebaseError);
                }
                
                // 2. Buscar também do localStorage
                const dadosSalvos = localStorage.getItem('dadosFerias');
                if (dadosSalvos) {
                    const dados = JSON.parse(dadosSalvos);
                    if (dados.historicoFerias) {
                        historicoFerias = historicoFerias.concat(dados.historicoFerias);
                    }
                }
                
                console.log('Total de períodos de férias encontrados:', historicoFerias.length);

                if (historicoFerias.length > 0) {
                    const feriasFuturas = historicoFerias
                        .filter(ferias => {
                            if (!ferias.periodo) return false;
                            
                            // Converter a data para um objeto Date
                            let dataInicio;
                            if (ferias.periodo.includes('/')) {
                                const [dia, mes, ano] = ferias.periodo.split('/');
                                dataInicio = new Date(ano, mes - 1, dia);
                            } else {
                                dataInicio = new Date(ferias.periodo);
                            }
                            
                            // Ajustar para o próximo dia útil
                            dataInicio = ajustarParaDiaUtil(dataInicio);
                            dataInicio.setHours(0, 0, 0, 0);
                            
                            const ehFuturo = dataInicio >= hoje;
                            
                            console.log('Verificando férias:', {
                                periodo: ferias.periodo,
                                dataInicioObj: dataInicio,
                                hoje: hoje,
                                ehFuturo: ehFuturo
                            });
                            
                            return ehFuturo;
                        })
                        .sort((a, b) => {
                            const getDate = (data) => {
                                if (data.includes('/')) {
                                    const [dia, mes, ano] = data.split('/');
                                    let dataObj = new Date(ano, mes - 1, dia);
                                    return ajustarParaDiaUtil(dataObj);
                                }
                                let dataObj = new Date(data);
                                return ajustarParaDiaUtil(dataObj);
                            };
                            return getDate(a.periodo) - getDate(b.periodo);
                        });

                    console.log('Férias futuras encontradas:', feriasFuturas);

                    const proximasFerias = feriasFuturas[0];
                    
                    if (proximasFerias) {
                        console.log('Próximas férias:', proximasFerias);
                        
                        // Converter a data para exibição
                        let dataInicio;
                        if (proximasFerias.periodo.includes('/')) {
                            const [dia, mes, ano] = proximasFerias.periodo.split('/');
                            dataInicio = new Date(ano, mes - 1, dia);
                        } else {
                            dataInicio = new Date(proximasFerias.periodo);
                        }
                        
                        // Ajustar para o próximo dia útil
                        dataInicio = ajustarParaDiaUtil(dataInicio);
                        
                        const diasFaltando = Math.ceil((dataInicio - hoje) / (1000 * 60 * 60 * 24));
                        
                        // Adicionar dia da semana
                        const diasSemana = ['Domingo', 'Segunda-feira', 'Terça-feira', 'Quarta-feira', 'Quinta-feira', 'Sexta-feira', 'Sábado'];
                        const diaSemana = diasSemana[dataInicio.getDay()];
                        
                        // Formatar a data para exibição
                        const dataFormatada = dataInicio.toLocaleDateString('pt-BR');
                        
                        if (diasFaltando >= 0) {
                            alertaFerias.innerHTML = `
                                <div class="alerta-titulo">
                                    <i class="fas fa-umbrella-beach alerta-icone"></i>
                                    Suas Próximas Férias
                                </div>
                                <div class="alerta-conteudo">
                                    ${diasFaltando === 0 ? 'Começam hoje!' : `Em ${diasFaltando} dia${diasFaltando > 1 ? 's' : ''}`}
                                    (${diaSemana}, ${dataFormatada})
                                </div>
                            `;
                            alertaFerias.style.display = 'block';
                            alertaFerias.style.backgroundColor = diasFaltando === 0 ? '#d4edda' : '#fff3cd';
                            alertaFerias.style.color = diasFaltando === 0 ? '#155724' : '#856404';
                            alertaFerias.style.borderLeftColor = diasFaltando === 0 ? '#28a745' : '#ffc107';
                        }
                    } else {
                        alertaFerias.innerHTML = `
                            <div class="alerta-titulo">
                                <i class="fas fa-info-circle alerta-icone"></i>
                                Suas Férias
                            </div>
                            <div class="alerta-conteudo">
                                Nenhuma férias agendada
                            </div>
                        `;
                        alertaFerias.style.display = 'block';
                        alertaFerias.style.backgroundColor = '#e2e3e5';
                        alertaFerias.style.color = '#383d41';
                        alertaFerias.style.borderLeftColor = '#d6d8db';
                    }
                } else {
                    alertaFerias.innerHTML = `
                        <div class="alerta-titulo">
                            <i class="fas fa-info-circle alerta-icone"></i>
                            Suas Férias
                        </div>
                        <div class="alerta-conteudo">
                            Nenhuma férias registrada
                        </div>
                    `;
                    alertaFerias.style.display = 'block';
                    alertaFerias.style.backgroundColor = '#e2e3e5';
                    alertaFerias.style.color = '#383d41';
                    alertaFerias.style.borderLeftColor = '#d6d8db';
                }
            } catch (error) {
                console.error('Erro ao verificar próximas férias:', error);
                alertaFerias.innerHTML = `
                    <div class="alerta-titulo">
                        <i class="fas fa-exclamation-triangle alerta-icone"></i>
                        Erro
                    </div>
                    <div class="alerta-conteudo">
                        Erro ao carregar informações de férias
                    </div>
                `;
                alertaFerias.style.display = 'block';
                alertaFerias.style.backgroundColor = '#f8d7da';
                alertaFerias.style.color = '#721c24';
                alertaFerias.style.borderLeftColor = '#dc3545';
            }
        }
    </script>

    <script>
        // Função para atualizar data e hora no header
        function atualizarRelogioHeader() {
            const atualizarHora = () => {
                const agora = new Date();
                
                // Atualizar hora
                document.getElementById('clock').textContent = 
                    agora.toLocaleTimeString('pt-BR', { 
                        hour: '2-digit', 
                        minute: '2-digit',
                        second: '2-digit'
                    });

                // Atualizar dia da semana
                document.getElementById('weekday').textContent = 
                    agora.toLocaleDateString('pt-BR', { 
                        weekday: 'long'
                    }).charAt(0).toUpperCase() + 
                    agora.toLocaleDateString('pt-BR', { 
                        weekday: 'long'
                    }).slice(1);
                
                // Atualizar data
                document.getElementById('current-date').textContent = 
                    agora.toLocaleDateString('pt-BR', { 
                        day: '2-digit',
                        month: 'long',
                        year: 'numeric'
                    });

                // Atualizar dia da semana
                document.getElementById('weekday').textContent = 
                    agora.toLocaleDateString('pt-BR', { 
                        weekday: 'long'
                    }).charAt(0).toUpperCase() + 
                    agora.toLocaleDateString('pt-BR', { 
                        weekday: 'long'
                    }).slice(1);
            };

            // Atualizar imediatamente e depois a cada segundo
            atualizarHora();
            setInterval(atualizarHora, 1000);
        }

        // Chamar a função quando o documento carregar
        document.addEventListener('DOMContentLoaded', atualizarRelogioHeader);
    </script>

    <script>
        // Função para verificar aniversariantes do mês
        function verificarAniversariantesMes() {
            const aniversarios = [
                { nome: 'Marcelo Silva Ribeiro', data: '29/12' },
                { nome: 'Marta Maria de Souza Pinto Silva', data: '28/02' },
                { nome: 'Severino Caetano da Silva Filho', data: '26/03' },
                { nome: 'Natalia Pereira Morais', data: '31/03' },
                { nome: 'Wagner Waldir Leite', data: '07/04' },
                { nome: 'Lloyd Hildevert Beteille Sobrinho', data: '12/04' },
                { nome: 'Thais Helena Santos Camargo Simoes', data: '11/05' },
                { nome: 'Nathany Gazolli de Souza', data: '23/09' },
                { nome: 'Tatiana da Rocha Natale', data: '28/09' }
            ];

            const hoje = new Date();
            const mesAtual = hoje.getMonth() + 1; // getMonth() retorna 0-11
            const diaAtual = hoje.getDate();

            console.log('Mês atual:', mesAtual); // Debug

            const aniversariantesMes = aniversarios.filter(aniversario => {
                const [dia, mes] = aniversario.data.split('/').map(Number);
                console.log('Verificando:', aniversario.nome, 'mes:', mes); // Debug
                return mes === mesAtual;
            });

            const alertaAniversario = document.getElementById('alertaAniversario');
            
            if (aniversariantesMes.length > 0) {
                // Ordenar por dia
                aniversariantesMes.sort((a, b) => {
                    const diaA = parseInt(a.data.split('/')[0]);
                    const diaB = parseInt(b.data.split('/')[0]);
                    return diaA - diaB;
                });

                const nomesAniversariantes = aniversariantesMes.map(a => {
                    const dia = a.data.split('/')[0];
                    const jaPassou = parseInt(dia) < diaAtual;
                    const data = new Date(hoje.getFullYear(), mesAtual - 1, parseInt(dia));
                    const diaSemana = data.toLocaleDateString('pt-BR', { 
                        weekday: 'long'
                    });
                    return `
                        <div class="aniversariante-item">
                            <span class="aniversariante-dia">${dia}</span>
                            <span class="nome-aniversariante">${a.nome} (${diaSemana})</span>
                            ${jaPassou ? '<span class="status-aniversario">(já comemorado)</span>' : ''}
                        </div>`;
                }).join('');

                const meses = [
                    'Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho',
                    'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'
                ];

                alertaAniversario.innerHTML = `
                    <div class="alerta-titulo">
                        <i class="fas fa-birthday-cake"></i>
                        Aniversariantes de ${meses[mesAtual - 1]}
                    </div>
                    <div class="alerta-conteudo">
                        ${nomesAniversariantes}
                    </div>`;
                alertaAniversario.classList.add('aniversario');
            } else {
                alertaAniversario.style.display = 'none';
                console.log('Sem aniversariantes este mês'); // Debug
            }
        }

        // Garantir que a função seja chamada após o carregamento completo
        window.addEventListener('load', verificarAniversariantesMes);
        document.addEventListener('DOMContentLoaded', verificarAniversariantesMes);
    </script>

    <script>
        // Função para alternar o tema
        function toggleTheme() {
            const body = document.body;
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        }

        // Carregar tema salvo
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.body.setAttribute('data-theme', savedTheme);
        });
    </script>
    <script src="js/theme.js"></script>
</body>
</html>